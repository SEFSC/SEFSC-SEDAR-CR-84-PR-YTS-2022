<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.22">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; Data-Informed Modeling Decisions – SEDAR 84</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../content/methods.html" rel="next">
<link href="../content/introduction.html" rel="prev">
<link href="../assets/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b4406b7675125bc2ba204020e191172.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-c7426dba9013db734c319f1a98e464fa.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>table {padding: 2em 0 2em 0}</style>
<style>figure {padding: 2em 0 2em 0}</style>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../content/data.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data-Informed Modeling Decisions</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="https://raw.githubusercontent.com/nmfs-opensci/assets/main/logo/nmfs-opensci-logo3.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">SEDAR 84</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://nmfs-opensci.github.io" title="NMFS Open Science" class="quarto-navigation-tool px-1" aria-label="NMFS Open Science"><i class="bi bi-globe"></i></a>
    <a href="https://github.com/SEFSC/SEFSC-SEDAR-CR-84-STTJ-YTS-2022" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../SEDAR-84.pdf">
              <i class="bi bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../SEDAR-84.docx">
              <i class="bi bi-file-word pe-1"></i>
            Download Docx
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assessment Process Report Summary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data-Informed Modeling Decisions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Model Development</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/research.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">SEDAR Panel Research Recommendations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Tables</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/figures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Figures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-data-fleet" id="toc-sec-data-fleet" class="nav-link active" data-scroll-target="#sec-data-fleet"><span class="header-section-number">2.1</span> Commercial Fleet Data</a>
  <ul class="collapse">
  <li><a href="#sec-data-fleet-catch" id="toc-sec-data-fleet-catch" class="nav-link" data-scroll-target="#sec-data-fleet-catch"><span class="header-section-number">2.1.1</span> Catch</a></li>
  <li><a href="#sec-data-fleet-size" id="toc-sec-data-fleet-size" class="nav-link" data-scroll-target="#sec-data-fleet-size"><span class="header-section-number">2.1.2</span> Size Composition</a></li>
  </ul></li>
  <li><a href="#sec-data-survey" id="toc-sec-data-survey" class="nav-link" data-scroll-target="#sec-data-survey"><span class="header-section-number">2.2</span> Survey Data</a>
  <ul class="collapse">
  <li><a href="#sec-data-survey-index" id="toc-sec-data-survey-index" class="nav-link" data-scroll-target="#sec-data-survey-index"><span class="header-section-number">2.2.1</span> Index of Abundance</a></li>
  <li><a href="#sec-data-survey-size" id="toc-sec-data-survey-size" class="nav-link" data-scroll-target="#sec-data-survey-size"><span class="header-section-number">2.2.2</span> Size Composition</a></li>
  </ul></li>
  <li><a href="#sec-data-biology" id="toc-sec-data-biology" class="nav-link" data-scroll-target="#sec-data-biology"><span class="header-section-number">2.3</span> Life History Data</a>
  <ul class="collapse">
  <li><a href="#sec-data-growth" id="toc-sec-data-growth" class="nav-link" data-scroll-target="#sec-data-growth"><span class="header-section-number">2.3.1</span> Growth</a></li>
  <li><a href="#sec-data-morphometric" id="toc-sec-data-morphometric" class="nav-link" data-scroll-target="#sec-data-morphometric"><span class="header-section-number">2.3.2</span> Morphometric Conversion</a></li>
  <li><a href="#sec-data-reproduction" id="toc-sec-data-reproduction" class="nav-link" data-scroll-target="#sec-data-reproduction"><span class="header-section-number">2.3.3</span> Maturity, Fecundity, and Hermaphroditism</a></li>
  <li><a href="#sec-data-sr" id="toc-sec-data-sr" class="nav-link" data-scroll-target="#sec-data-sr"><span class="header-section-number">2.3.4</span> Stock Recruitment</a></li>
  <li><a href="#sec-data-m" id="toc-sec-data-m" class="nav-link" data-scroll-target="#sec-data-m"><span class="header-section-number">2.3.5</span> Maximum Age and Natural Mortality</a></li>
  </ul></li>
  <li><a href="#sec-data-summary" id="toc-sec-data-summary" class="nav-link" data-scroll-target="#sec-data-summary"><span class="header-section-number">2.4</span> Summary of Data-Informed Modeling Configurations</a>
  <ul class="collapse">
  <li><a href="#sec-data-summary-fleet" id="toc-sec-data-summary-fleet" class="nav-link" data-scroll-target="#sec-data-summary-fleet"><span class="header-section-number">2.4.1</span> Commercial Fleet</a></li>
  <li><a href="#sec-data-summary-survey" id="toc-sec-data-summary-survey" class="nav-link" data-scroll-target="#sec-data-summary-survey"><span class="header-section-number">2.4.2</span> Survey</a></li>
  <li><a href="#sec-data-summary-biology" id="toc-sec-data-summary-biology" class="nav-link" data-scroll-target="#sec-data-summary-biology"><span class="header-section-number">2.4.3</span> Life History</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/SEFSC/SEFSC-SEDAR-CR-84-STTJ-YTS-2022/edit/main/content/data.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/SEFSC/SEFSC-SEDAR-CR-84-STTJ-YTS-2022/blob/main/content/data.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/SEFSC/SEFSC-SEDAR-CR-84-STTJ-YTS-2022/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data-Informed Modeling Decisions</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The data available for use in the current assessment are documented in the SEDAR 84 U.S. Caribbean Yellowtail Puerto Rico Data Workshop Report <span class="citation" data-cites="sedar2024">(<a href="references.html#ref-sedar2024" role="doc-biblioref">SEDAR, 2024</a>)</span>. Provided here is a summary of those data with a focus on the associated model configurations explored using Stock Synthesis. Throughout this report, <strong>bold text</strong> is used to highlight and summarize the model settings and configurations relevant to the various phases of model development.</p>
<p>Additional details for each data input are available in their respective references:</p>
<ol type="1">
<li><strong>Landings</strong> from self-reported commercial fisher logbooks <span class="citation" data-cites="martínezrivera2024">(<a href="references.html#ref-martínezrivera2024" role="doc-biblioref">Martínez Rivera et al., 2024</a>)</span></li>
<li><strong>Length compositions</strong> from shore-based port sampling <span class="citation" data-cites="godwin2024">(<a href="references.html#ref-godwin2024" role="doc-biblioref">Godwin et al., 2024</a>)</span></li>
<li><strong>Length compositions</strong> from a fishery-independent survey of reef fish <span class="citation" data-cites="grove2024">(<a href="references.html#ref-grove2024" role="doc-biblioref">Grove et al., 2024</a>)</span></li>
<li><strong>Indices of abundance</strong> from a fishery-independent survey of reef fish <span class="citation" data-cites="grove2024">(<a href="references.html#ref-grove2024" role="doc-biblioref">Grove et al., 2024</a>)</span></li>
<li><strong>Life history information</strong> from otolith analysis and gonad histology <span class="citation" data-cites="riverahernández2024">(<a href="references.html#ref-riverahernández2024" role="doc-biblioref">Shervette et al., 2024</a>)</span></li>
</ol>
<p><strong>Based on the available data, the assessment was configured with one area, one season, one commercial fleet, and one fishery-independent survey.</strong></p>
<section id="sec-data-fleet" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="sec-data-fleet"><span class="header-section-number">2.1</span> Commercial Fleet Data</h2>
<section id="sec-data-fleet-catch" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="sec-data-fleet-catch"><span class="header-section-number">2.1.1</span> Catch</h3>
<p>The catch data for the commercial fleet came from the Caribbean Commercial Logbook program <span class="citation" data-cites="martínezrivera2024">(<a href="references.html#ref-martínezrivera2024" role="doc-biblioref">Martínez Rivera et al., 2024</a>)</span>. Commercial fishery landings data for Yellowtail Snapper in Puerto Rico were available for the years 1983-2022.</p>
<p>The handline gear group made up 80% of the reported landings catch of Yellowtail Snapper in Puerto Rico from this group. All gears (handline, trap, rod and reel, and other) were included into a single commercial fleet (<a href="tables.html#tbl-catch" class="quarto-xref">Table&nbsp;<span>5.1</span></a>). Potential outliers discussed during the assessment webinars were investigated and retained as valid trips.</p>
<p>In the SEDAR 84 Stock Synthesis models, <strong>the catch was input as biomass (in metric tons) and was treated as if it occurred over an entire fishing season; i.e., each fishing year.</strong></p>
<p>The years of the available species-specific self-reported commercial fisher logbook landings and effort data determined the start and end years of the Stock Synthesis models. <strong>The start and end years of the model were 1983 and 2022, respectively.</strong></p>
<p>It is important to note that the stock was not unexploited at the start year of the available catch time series. Therefore, initial F was estimated for the commercial fleet and a corresponding initial equilibrium catch was input. A common method was use to define an initial equilibrium catch. It was equal to the geometric mean of the first three years of available catches (168.3 metric tons).</p>
<p><strong>The input standard error for the landings was set to 0.3.</strong> When implemented with few data inputs, Stock synthesis will inherently fit the annual landings time series nearly exactly, regardless of the input standard error. Initial models were set up with a default standard error of 0.01. In addition to nearly exactly fitting the annual landings time series, the models also nearly exactly fit the input initial equilibrium catch. A higher standard error value of 0.3 was used to free up the estimation of the initial equilibrium catch. The sequential model configurations and model development are described later in this report.</p>
<p>Commercial discards are not reported in Puerto Rico fisher logbook data. <strong>The assessment assumed no discards</strong>.</p>
<p>Alternative model configurations associated with the commercial fleet data are described later in this report. They included:</p>
<ul>
<li>The initial equilibrium catch was explored via likelihood profiling.</li>
<li>A higher standard error of 2 was explored via sensitivity analysis.</li>
</ul>
</section>
<section id="sec-data-fleet-size" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="sec-data-fleet-size"><span class="header-section-number">2.1.2</span> Size Composition</h3>
<p>Gear-specific annual length frequencies for the commercial fleet came from the commercial shore-based port-sampling Trip Interview Program <span class="citation" data-cites="godwin2024">(<a href="references.html#ref-godwin2024" role="doc-biblioref">Godwin et al., 2024</a>)</span>. The NOAA Fisheries, Southeast Fisheries Science Center Trip Interview Program collects length and weight data from fish landed by commercial fishing vessels, along with information about fishing areas and gears. Data collection began in 1983 with frequent updates in best practices; the latest being in 2017. The Yellowtail Snapper length data from Puerto Rico included 103,730 length observations across 5,159 unique port sampling interviews.</p>
<p>Although the catch data can be separated into handline and non-handline related gears, 77% of the length measurements for Puerto Rico Yellowtail Snapper from 1983-2022 were associated with handlines. Those data were used to characterize the commercial fleet’s size-based selectivity pattern. Since multiple fish length measurements can be obtained from a single sampled trip, each length does not represent an independent observation. <strong>The relative model weighting of the commercial fleet length compositions was based on the number of trips sampled</strong>.</p>
<p>From 1983 - 2022, the size data included 83,341 shore-based length measurements obtained across 2,829 trips. <strong>The Trip Interview Program length compositions of the commercial fleet were assumed to be representative of the total catch.</strong></p>
<p><strong>A double normal function was used to model the relative vulnerability of capture by length for the commercial fleet.</strong> However, only two parameters were estimated, effectively describing a logistic selectivity for the commercial fleet. The double normal function allows for domed or logistic selectivity. It combines two normal distributions; the first describes the ascending limb, while the second describes the descending limb. Achieving the logistic shape with the double normal Stock Synthesis pattern facilitated model configurations for SEDAR 84. The two parameters used to achieve a logistic selectivity shape were the size associated with peak selectivity and the width of the ascending limb. Domed selectivity was explored for the fishery independent survey data described in the following section.</p>
</section>
</section>
<section id="sec-data-survey" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-data-survey"><span class="header-section-number">2.2</span> Survey Data</h2>
<section id="sec-data-survey-index" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="sec-data-survey-index"><span class="header-section-number">2.2.1</span> Index of Abundance</h3>
<p>The National Coral Reef Monitoring Program (NCRMP) supports reef fish sampling on hard-bottom habitats from 0 to 30 meters depth <span class="citation" data-cites="grove2021">(<a href="references.html#ref-grove2021" role="doc-biblioref">Grove et al., 2021</a>)</span>. In Puerto Rico, NCRMP sampling began in 2001 and was conducted every year from 2001 to 2012 and then 2014, 2016, 2019, and 2021. The data used in SEDAR 84 were from 2014 - 2022 when the survey was conducted island-wide. Data collected prior to 2017 were calibrated to account for a transition from belt transect to a cylinder survey method.</p>
<p>Annual mean density and associated standard errors for NCRMP for SEDAR 84 were provided by <span class="citation" data-cites="grove2024">Grove et al. (<a href="references.html#ref-grove2024" role="doc-biblioref">2024</a>)</span>. In Stock Synthesis, the time series of mean density across all observed sizes <strong>were input as an index in numbers with a lognormal error distribution</strong>. The associated length composition data, described in the following subsection, suggested that <strong>the index reflected the abundance of juveniles but did not observe the larger adults concurrently observed in the commercial catch data</strong>.</p>
</section>
<section id="sec-data-survey-size" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="sec-data-survey-size"><span class="header-section-number">2.2.2</span> Size Composition</h3>
<p>The NCRMP survey in Puerto Rico provided counts by individual lengths measured to the nearest centimeter. <strong>The length data inputs for both the commercial fleet and the surveys were used 3-centimeter bins.</strong></p>
<p>Since multiple fish can be observed during a single dive, individual lengths are not independent observations. <strong>The relative model weighting of the NCRMP survey and DCRMP survey length compositions across years was based on the number of paired dives.</strong></p>
<p>The length compositions provided reasonable support that younger fish were available to the NCRMP survey. Over half of the lengths from the NCRMP survey were smaller than 20 centimeters fork length, and 99% were below 33 centimeters fork length. <strong>Dome-shaped selectivity was explored for the NCRMP survey.</strong></p>
<p>Models were initially configured in Stock Synthesis with length compositions aggregated across the available years for each source of length data and proceeded stepwise from the simplest configuration to those of moderate complexity. The steps included the inclusion of annual fishery-independent length compositions. The sequential model configurations are described later in this report.</p>
</section>
</section>
<section id="sec-data-biology" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="sec-data-biology"><span class="header-section-number">2.3</span> Life History Data</h2>
<p>The life history data used in the assessment included longevity-informed natural mortality, growth, length-weight, and maturity analyzed from 1,554 samples of Yellowtail Snapper collected across the U.S. Caribbean from 2013 to 2023 <span class="citation" data-cites="riverahernández2024">(<a href="references.html#ref-riverahernández2024" role="doc-biblioref">Shervette et al., 2024</a>)</span>. The largest fish was 57.2 centimeters fork length and the oldest was 26 years old.</p>
<p>Based on the available information, <strong>the Yellowtail Snapper population was modeled from age 0 through age 26, and from 0 to 56-centimeters fork length, in 1-centimeter bins, with the largest values for each as plus groups.</strong></p>
<p>Note that SS3 allows the length bins of the data inputs to be larger than the bins used in the population model. <strong>The size bins of all the length data inputs were 3 centimeters, the model’s simulated population bin size was 1-centimeter bins.</strong> When the population is modeled at a higher resolution concerning bin size, the likelihood function, which aims to match the observed data inputs and the simulated population estimates, operates at the resolution of the data inputs.</p>
<section id="sec-data-growth" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="sec-data-growth"><span class="header-section-number">2.3.1</span> Growth</h3>
<p>The SS3 growth formulation requires five parameters:</p>
<ul>
<li>Length at the youngest age</li>
<li>Length at the maximum age</li>
<li>Von Bertalanffy growth parameter (K)</li>
<li>Coefficient of variation at the youngest age</li>
<li>Coefficient of variation at the maximum age</li>
</ul>
<p><strong>Parameter estimates for Von Bertalanffy growth parameter (K) and the length at maximum age (L∞) were based on 1,554 samples of Yellowtail Snapper collected across the U.S. Caribbean from 2013 to 2023 <span class="citation" data-cites="riverahernández2024">(<a href="references.html#ref-riverahernández2024" role="doc-biblioref">Shervette et al., 2024</a>)</span>.</strong> When t<sub>0</sub> was fixed to -0.96, K was 0.23, and L∞ was 42.4 centimeters fork length. When t<sub>0</sub> was estimated, it was -2.73, K was 0.12, and L∞ was 50.8 centimeters fork length.</p>
<p>The SEDAR 84 assessment models were configured using the parameter estimates associated with the fixed t<sub>0</sub>. Furthermore, <strong>the estimated size at age zero from otolith analysis by <span class="citation" data-cites="riverahernández2024">Shervette et al. (<a href="references.html#ref-riverahernández2024" role="doc-biblioref">2024</a>)</span> was modified in Stock Synthesis so that the length of the youngest age, age 0, was set to zero.</strong> Without this modification, the model would be unable to fit the substantial amounts of small (&lt;10cm) Yellowtail Snapper observed in the survey size composition data.</p>
<p><strong>Coefficients of variation for both younger and older ages were initially set to 0.15.</strong> Ideally, growth coefficients of variation should be derived from observed length-at-age data, however, the assumed values are consistent with species of moderate growth variability.</p>
<p>Alternative model configurations associated with the growth data are described later in this report. They included:</p>
<ul>
<li>A higher growth coefficient of variation of 0.25 for younger ages was explored via sensitivity analysis.</li>
</ul>
</section>
<section id="sec-data-morphometric" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="sec-data-morphometric"><span class="header-section-number">2.3.2</span> Morphometric Conversion</h3>
<p>The relationship between weight in grams and length in millimeters provided by <span class="citation" data-cites="riverahernández2024">Shervette et al. (<a href="references.html#ref-riverahernández2024" role="doc-biblioref">2024</a>)</span> was converted to weight in grams and length in centimeters and used as a fixed model input. <strong>The length-weight relationship was W = 2.93 x 10<sup>-5</sup> * L<sup>2.8642</sup>, with weight (W) in kilograms and length (L) in centimeters.</strong></p>
</section>
<section id="sec-data-reproduction" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="sec-data-reproduction"><span class="header-section-number">2.3.3</span> Maturity, Fecundity, and Hermaphroditism</h3>
<p><strong>Maturity was modeled as a logistic function.</strong> Parameter estimates for maturity were based on 1,876 samples of Yellowtail Snapper collected across the U.S. Caribbean from 2013 to 2023 <span class="citation" data-cites="riverahernández2024">(<a href="references.html#ref-riverahernández2024" role="doc-biblioref">Shervette et al., 2024</a>)</span>. <strong>The fecundity of Yellowtail Snapper was estimated with a proxy (body weight * maturity at age).</strong></p>
</section>
<section id="sec-data-sr" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="sec-data-sr"><span class="header-section-number">2.3.4</span> Stock Recruitment</h3>
<p><strong>A Beverton-Holt stock-recruit function was used to parametrize the relationship between spawning output and resulting recruitment of age-0 fish.</strong> The stock-recruit function requires three parameters:</p>
<ul>
<li>Steepness (h) characterizes the initial slope of the ascending limb (i.e., the fraction of recruits produced at 20% of the unfished spawning biomass).</li>
<li>The virgin recruitment (R0; estimated in log space) represents the asymptote or unfished recruitment levels.</li>
<li>The variance term (sigma R) is the standard deviation of the log of recruitment and describes the amount of year-to-year variation in recruitment.</li>
</ul>
<p>Only the virgin recruitment (R0) was estimated. <strong>Sigma R and steepness were fixed at 0.7 and 0.99, respectively.</strong> The 0.7 sigma R reflects slightly high variation in recruitment. A value of 0.6 is a moderate level of recruitment variability, with lower values indicating lower variability and more predictable year-to-year recruitment. The primary assumption for steepness was that this stock is not a closed population, so recruitment may not be strongly tied to the local spawning stock biomass. <strong>In initial model configurations, annual deviations from the stock-recruit function were not estimated.</strong> Steepness and R0 were explored via likelihood profiling.</p>
<p><strong>Continuous recruitment was parameterized in SS3 using four settlement events.</strong> Equal proportions of recruits were assigned to each settlement event, and they were spaced such that recruitment would happen in months 1, 4, 7, and 10. This allowed growth to be staggered, reflecting a closer approximation of the observed stock dynamic of year-round spawning activity.</p>
</section>
<section id="sec-data-m" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="sec-data-m"><span class="header-section-number">2.3.5</span> Maximum Age and Natural Mortality</h3>
<p>Empirical estimates of natural mortality (M) can be derived using life history information such as longevity, growth, and maturity. For this assessment, the Natural Mortality Tool was used to estimate M <span class="citation" data-cites="cope2022">(<a href="references.html#ref-cope2022" role="doc-biblioref">Cope &amp; Hamel, 2022</a>)</span>. Various methods were explored, incorporating factors such as maximum age, the Von Bertalanffy growth parameter (K), theoretical age at size zero (t0), asymptotic size (L∞), and age at 50% maturity.</p>
<p>Inputs for the Natural Mortality Tool were sourced from <span class="citation" data-cites="riverahernández2024">Shervette et al. (<a href="references.html#ref-riverahernández2024" role="doc-biblioref">2024</a>)</span>, who observed a maximum age of 26 years for Yellowtail Snapper in the U.S. Caribbean. However, the average age of 1,554 sampled fish was 5 years.</p>
<p><a href="tables.html#tbl-m" class="quarto-xref">Table&nbsp;<span>5.2</span></a> summarizes the empirical methods used to estimate M based on available life history data. The primary approach for determining natural mortality in this assessment was longevity-based <span class="citation" data-cites="hamel2022">(<a href="references.html#ref-hamel2022" role="doc-biblioref">Hamel &amp; Cope, 2022</a>)</span>.</p>
<p><strong>A natural mortality value of 0.208 was used in the initial model runs</strong>. This value corresponds with the maximum age of 26 years reported by <span class="citation" data-cites="riverahernández2024">Shervette et al. (<a href="references.html#ref-riverahernández2024" role="doc-biblioref">2024</a>)</span>. Model configurations incorporating an alternative M value associated with a slightly higher maximum age were explored through sensitivity analyses, which are discussed later in this report.</p>
</section>
</section>
<section id="sec-data-summary" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="sec-data-summary"><span class="header-section-number">2.4</span> Summary of Data-Informed Modeling Configurations</h2>
<ul>
<li>Based on the available data, the assessment was configured with one area, one season, one commercial fleet, and one fishery-independent survey.</li>
</ul>
<section id="sec-data-summary-fleet" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="sec-data-summary-fleet"><span class="header-section-number">2.4.1</span> Commercial Fleet</h3>
<ul>
<li><p>The catch was input as biomass (in metric tons) and was treated as if it occurred over an entire fishing season; i.e., each fishing year.</p></li>
<li><p>The start and end years of the model were 1983 and 2022, respectively.</p></li>
<li><p>The assessment assumed no discards.</p></li>
<li><p>The input standard error for the landings was set to 0.3.</p>
<ul>
<li>A higher standard error of 2 was explored via sensitivity analysis.</li>
</ul></li>
<li><p>The initial equilibrium catch was configured in initial runs as 168.3 metric tons.</p>
<ul>
<li>The initial equilibrium catch was explored via likelihood profiling.</li>
</ul></li>
<li><p>The relative model weighting of the commercial fleet length compositions was based on the number of trips sampled.</p></li>
<li><p>The length compositions of the commercial fleet were assumed to be representative of the total catch.</p></li>
<li><p>A double normal function was used to model the relative vulnerability of capture by length for the commercial fleet.</p></li>
</ul>
</section>
<section id="sec-data-summary-survey" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="sec-data-summary-survey"><span class="header-section-number">2.4.2</span> Survey</h3>
<ul>
<li><p>The NCRMP index reflected the abundance of juveniles.</p></li>
<li><p>The survey wAS configured as an index in numbers with a lognormal error distribution.</p></li>
<li><p>The relative model weighting of the surveys length compositions across years were based on the number of paired dives.</p></li>
<li><p>The length data inputs used 3-centimeter bins.</p></li>
<li><p>The model’s simulated population bin size was 1-centimeter bins.</p></li>
<li><p>The model development process explored dome-shaped selectivity for the fishery independent survey.</p></li>
</ul>
</section>
<section id="sec-data-summary-biology" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="sec-data-summary-biology"><span class="header-section-number">2.4.3</span> Life History</h3>
<ul>
<li><p>The Yellowtail Snapper population was modeled from age 0 through age 26, and from 0 to 56-centimeters fork length, in 1-centimeter bins, with the largest values for each as plus groups.</p></li>
<li><p>Parameter estimates for Von Bertalanffy growth parameter (K) and the length at maximum age (L∞) were based on samples of Yellowtail Snapper collected across the U.S. Caribbean from 2013 to 2023.</p></li>
<li><p>The estimated size at age zero from otolith analysis by <span class="citation" data-cites="riverahernández2024">Shervette et al. (<a href="references.html#ref-riverahernández2024" role="doc-biblioref">2024</a>)</span> was modified in Stock Synthesis so that the length of the youngest age, age 0, was set to zero.</p></li>
<li><p>Coefficients of variation for both younger and older ages were initially set to 0.15.</p>
<ul>
<li>A higher growth coefficient of variation of 0.25 for younger ages was explored via sensitivity analysis.</li>
</ul></li>
<li><p>The length-weight relationship was W = 2.93 x 10^-5 L^ 2.8642, with weight in kilograms and length in centimeters.</p></li>
<li><p>A natural mortality value of 0.208 was used in the initial model runs.</p>
<ul>
<li>Alternative M values were explored through sensitivity analyses.</li>
</ul></li>
<li><p>Maturity was modeled as a logistic function.</p></li>
<li><p>The fecundity of Yellowtail Snapper was estimated with a proxy (body weight * maturity at age).</p></li>
<li><p>A Beverton-Holt stock-recruit function was used to parametrize the relationship between spawning output and resulting recruitment of age-0 fish.</p></li>
<li><p>Sigma R and steepness were fixed at 0.7 and 0.99, respectively.</p></li>
<li><p>In initial model configurations, annual deviations from the stock-recruit function were not estimated.</p></li>
<li><p>Continuous recruitment was parameterized in SS3 using four settlement events.</p></li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-cope2022" class="csl-entry" role="listitem">
Cope, J., &amp; Hamel, O. S. (2022). Upgrading from M version 0.2: An application-based method for practical estimation, evaluation and uncertainty characterization of natural mortality. <em>Fisheries Research</em>, <em>256</em>, 106493. <a href="https://doi.org/10.1016/j.fishres.2022.106493">https://doi.org/10.1016/j.fishres.2022.106493</a>
</div>
<div id="ref-godwin2024" class="csl-entry" role="listitem">
Godwin, K., Rios, A., &amp; Dettloff, K. (2024). <em>SEDAR 84 Trip Interview Program (TIP) Size Composition Analysis of <span>Yellowtail Snapper (Ocyurus chrysurus)</span> in <span>St. Thomas/St. John, U.S. Caribbean</span>, 1983-2022</em> (SEDAR84-WP-10; p. 10). SEDAR. <a href="https://sedarweb.org/documents/sedar-84-dw-10-sedar-84-trip-interview-program-tip-size-composition-analysis-of-yellowtail-snapper-ocyurus-chrysurus-in-st-thomas-st-john-u-s-caribbean-1983-2022/">https://sedarweb.org/documents/sedar-84-dw-10-sedar-84-trip-interview-program-tip-size-composition-analysis-of-yellowtail-snapper-ocyurus-chrysurus-in-st-thomas-st-john-u-s-caribbean-1983-2022/</a>
</div>
<div id="ref-grove2024" class="csl-entry" role="listitem">
Grove, L. J. W., Blondeau, J., &amp; Ault, J. (2024). <em>Fishery-Independent Reef Fish Visual Survey Population Density and Length Composition for <span>Yellowtail Snapper</span> in <span>St. Thomas/John</span></em> (SEDAR84-WP-16; p. 15). SEDAR. <a href="https://sedarweb.org/documents/sedar-84-dw-16-fishery-independent-reef-fish-visual-survey-population-density-and-length-composition-for-yellowtail-snapper-in-st-thomas-john/">https://sedarweb.org/documents/sedar-84-dw-16-fishery-independent-reef-fish-visual-survey-population-density-and-length-composition-for-yellowtail-snapper-in-st-thomas-john/</a>
</div>
<div id="ref-grove2021" class="csl-entry" role="listitem">
Grove, L. J. W., Blondeau, J., &amp; Ault, J. S. (2021). <em><span>National Coral Reef Monitoring Program</span><span>’</span>s reef fish visual census metadata for the <span>U.S. Caribbean.</span></em> 55. <a href="https://sedarweb.org/documents/sedar-80-wp-02-national-coral-reef-monitoring-programs-reef-fish-visual-census-metadata-for-the-u-s-caribbean/">https://sedarweb.org/documents/sedar-80-wp-02-national-coral-reef-monitoring-programs-reef-fish-visual-census-metadata-for-the-u-s-caribbean/</a>
</div>
<div id="ref-hamel2022" class="csl-entry" role="listitem">
Hamel, O. S., &amp; Cope, J. M. (2022). Development and considerations for application of a longevity-based prior for the natural mortality rate. <em>Fisheries Research</em>, <em>256</em>, 106477. <a href="https://doi.org/10.1016/j.fishres.2022.106477">https://doi.org/10.1016/j.fishres.2022.106477</a>
</div>
<div id="ref-martínezrivera2024" class="csl-entry" role="listitem">
Martínez Rivera, S., Johnson, K., &amp; Orhun, M. R. (2024). <em>SEDAR 84 Commercial fishery landings of <span>Yellowtail Snapper (Ocyurus chrysurus)</span> in <span>St. Thomas and St. John, US Caribbean</span>, 2012-2022.</em> (SEDAR84-WP-02; p. 21). SEDAR. <a href="https://sedarweb.org/documents/sedar-84-dw-02-sedar-84-commercial-fishery-landings-of-yellowtail-snapper-ocyurus-chrysurus-in-st-thomas-and-st-john-us-caribbean-2012-2022/">https://sedarweb.org/documents/sedar-84-dw-02-sedar-84-commercial-fishery-landings-of-yellowtail-snapper-ocyurus-chrysurus-in-st-thomas-and-st-john-us-caribbean-2012-2022/</a>
</div>
<div id="ref-sedar2024" class="csl-entry" role="listitem">
SEDAR. (2024). <em>SEDAR 84 <span>U.S. Caribbean Yellowtail Snapper St. Thomas/St. John</span> data workshop report</em> (p. 46). SEDAR. <a href="https://sedarweb.org/documents/sedar-84-us-caribbean-yellowtail-snapper-st-thomas-st-john-data-workshop-report/">https://sedarweb.org/documents/sedar-84-us-caribbean-yellowtail-snapper-st-thomas-st-john-data-workshop-report/</a>
</div>
<div id="ref-riverahernández2024" class="csl-entry" role="listitem">
Shervette, V., Rivera Hernández, J. M., &amp; Pena Alvarado, N. (2024). <em><span>U.S. Caribbean Yellowtail Snapper</span> Population Demographics, Growth, and Reproductive Biology: Addressing Critical Life History Gaps</em> (SEDAR84-WP-08; p. 29). SEDAR. <a href="https://sedarweb.org/documents/sedar-84-dw-08-u-s-caribbean-yellowtail-snapper-population-demographics-growth-and-reproductive-biology-addressing-critical-life-history-gaps/">https://sedarweb.org/documents/sedar-84-dw-08-u-s-caribbean-yellowtail-snapper-population-demographics-growth-and-reproductive-biology-addressing-critical-life-history-gaps/</a>
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/sturdy-adventure-166n52z\.pages\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../content/introduction.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../content/methods.html" class="pagination-link" aria-label="Model Development">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Model Development</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© CC-1.0</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/SEFSC/SEFSC-SEDAR-CR-84-STTJ-YTS-2022/edit/main/content/data.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/SEFSC/SEFSC-SEDAR-CR-84-STTJ-YTS-2022/blob/main/content/data.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/SEFSC/SEFSC-SEDAR-CR-84-STTJ-YTS-2022/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>